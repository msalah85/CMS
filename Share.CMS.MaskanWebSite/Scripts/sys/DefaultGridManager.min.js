var DefaultGridManager=DefaultGridManager||{},DefaultGridManager=function(){var i=function(){u();r()},r=function(){$("#btnAddNew").on("click",function(){var n="Add "+TitlePage;t(formName);commonManger.showPopUpDialog(n,"save",modalDialog)});$("#"+modalDialog+" .btn-primary").on("click",function(t){t.preventDefault();commonManger.saveDefaultData(modalDialog,formName,n,commonManger.errorException)});$("#"+modalDialog+" button.clse, .modal-header .close").on("click",function(n){commonManger.ResetControls(formName);n.preventDefault()});$("#"+deleteModalDialog+" .btn-delete").on("click",function(t){t.preventDefault();commonManger.deleteDefaultData(deleteModalDialog,formName,n,commonManger.errorException)});$("#"+modalDialog).on("hidden.bs.modal",function(){t(modalDialog)})},t=function(n){$("#"+n).find("input, select, textarea").each(function(){$(this).val("")})},n=function(n){$("#"+modalDialog).modal("hide");commonManger.showMessage("Data has been saved:",n.message);n.Status&&$("#"+gridId).DataTable().draw(!0)},u=function(){var n=$("#"+gridId).DataTable({bAutoWidth:!1,bServerSide:!0,sAjaxSource:sUrl+"LoadDataTables?funName="+tableName+"_SelectList",fnServerData:function(n,t,i){dataService.callAjax("GET",t,n,function(n){commonManger.setData2Grid(n,t.sEcho,i)},commonManger.errorException)},iDisplayLength:50,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],aaSorting:[],aoColumns:gridColumns}),t,i;$.fn.dataTable.Buttons.swfPath="/Content/sys/assets/js/dataTables/extensions/Buttons/swf/flashExport.swf";$.fn.dataTable.Buttons.defaults.dom.container.className="dt-buttons btn-overlap btn-group btn-overlap";new $.fn.dataTable.Buttons(n,{buttons:[{extend:"colvis",text:"<i class='fa fa-search bigger-110 blue'><\/i> <span class='hidden'>Show/hide columns<\/span>",className:"btn btn-white btn-primary btn-bold",columns:":not(:first):not(:last)"},{extend:"copy",text:"<i class='fa fa-copy bigger-110 pink'><\/i> <span class='hidden'>Copy to clipboard<\/span>",className:"btn btn-white btn-primary btn-bold"},{extend:"csv",text:"<i class='fa fa-database bigger-110 orange'><\/i> <span class='hidden'>Export to CSV<\/span>",className:"btn btn-white btn-primary btn-bold"},{extend:"excel",text:"<i class='fa fa-file-excel-o bigger-110 green'><\/i> <span class='hidden'>Export to Excel<\/span>",className:"btn btn-white btn-primary btn-bold"},{extend:"print",text:"<i class='fa fa-print bigger-110 grey'><\/i> <span class='hidden'>Print<\/span>",className:"btn btn-white btn-primary btn-bold",autoPrint:!0,message:"Basher Systems"}]});n.buttons().container().appendTo($(".tableTools-container"));t=n.button(1).action();n.button(1).action(function(n,i,r,u){t(n,i,r,u);$(".dt-button-info").addClass("gritter-item-wrapper gritter-info gritter-center white")});i=n.button(0).action();n.button(0).action(function(n,t,r,u){i(n,t,r,u);$(".dt-button-collection > .dropdown-menu").length==0&&$(".dt-button-collection").wrapInner('<ul class="dropdown-menu dropdown-light dropdown-caret dropdown-caret" />').find("a").attr("href","#").wrap("<li />");$(".dt-button-collection").appendTo(".tableTools-container .dt-buttons")});$("#"+gridId+" tbody").delegate("tr button","click",function(t){var u,f,i,h,s,o;if(t.preventDefault(),u=$(this),f=u.closest("tr"),f!==null)if(u.hasClass("edit"))h="Edit "+TitlePage,s="save",i=n.row(f).data(),commonManger.ResetControls(formName),commonManger.getDataForUpdate(i,formName),commonManger.showPopUpDialog(h,s,modalDialog);else if(u.hasClass("remove")){i=n.row(f).data();var c=" Delete "+TitlePage,r=[],e="";if(pKey.toLowerCase().indexOf(",")>=0){for(r=pKey.split(","),o=0;o<r.length-1;o++)e+=i[r[o]]+",";e+=i[r[r.length-1]]}else e=i[pKey];$("#"+deleteModalDialog).find(".removeField").text(e);commonManger.showPopUpDialog(c,s,deleteModalDialog)}})},f=function(){var n=sUrl+"GetDataDirect",t={actionName:tableName+"_Properties"},i=function(n,t){var i=$(t).map(function(n,t){var i=Object.keys(t);return $("<option />").val(t[i[0]]).text(t[i[1]])}).get();$(n).append(i)},r=function(n){for(var u,f,r=commonManger.decoData(n),e=$.isArray(r)?r.length:Object.keys(r).length,t=0;t<e;t++)u="list"+(t>0?t:""),f=$("#"+formName+" select:eq("+t+")"),i(f,r[u])};dataService.callAjax("GET",t,n,r,commonManger.errorException)};return{Init:i,successCallback:n,pageProperties:f}}();